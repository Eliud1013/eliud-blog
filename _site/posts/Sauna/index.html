<!DOCTYPE html>






 

 

<!-- `site.alt_lang` can specify a language different from the UI -->
<html
  lang="en"
  data-mode="dark"
>
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta
    name="theme-color"
    media="(prefers-color-scheme: light)"
    content="#f7f7f7"
  />
  <meta
    name="theme-color"
    media="(prefers-color-scheme: dark)"
    content="#1b1b1e"
  />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta
    name="apple-mobile-web-app-status-bar-style"
    content="black-translucent"
  />
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  /><!-- Setup Open Graph image -->

   <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="HTB: Sauna Writeup" />
<meta property="og:locale" content="en" />
<meta name="description" content="In this post, we’re resolving Sauna Machine from HackTheBox, where we’ll deal with an Active Directory environment. We will exploit AS-REP Roasting on a domain account, reading autologon credentials and doing some domain ACEs analysis using BloodHound, finally we will perfom a DCSync attack to escalate our privileges." />
<meta property="og:description" content="In this post, we’re resolving Sauna Machine from HackTheBox, where we’ll deal with an Active Directory environment. We will exploit AS-REP Roasting on a domain account, reading autologon credentials and doing some domain ACEs analysis using BloodHound, finally we will perfom a DCSync attack to escalate our privileges." />
<link rel="canonical" href="/posts/Sauna/" />
<meta property="og:url" content="/posts/Sauna/" />
<meta property="og:site_name" content="Elixir1013" />
<meta property="og:image" content="https://www.hackthebox.com/storage/avatars/f31d5d0264fadc267e7f38a9d7729d14.png" />
<meta property="og:image:alt" content="Machine Icon" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-09-09T05:00:00-07:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://www.hackthebox.com/storage/avatars/f31d5d0264fadc267e7f38a9d7729d14.png" />
<meta name="twitter:image:alt" content="Machine Icon" />
<meta property="twitter:title" content="HTB: Sauna Writeup" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-09-10T16:51:20-07:00","datePublished":"2024-09-09T05:00:00-07:00","description":"In this post, we’re resolving Sauna Machine from HackTheBox, where we’ll deal with an Active Directory environment. We will exploit AS-REP Roasting on a domain account, reading autologon credentials and doing some domain ACEs analysis using BloodHound, finally we will perfom a DCSync attack to escalate our privileges.","headline":"HTB: Sauna Writeup","image":{"alt":"Machine Icon","url":"https://www.hackthebox.com/storage/avatars/f31d5d0264fadc267e7f38a9d7729d14.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"/posts/Sauna/"},"url":"/posts/Sauna/"}</script>
<!-- End Jekyll SEO tag -->


  <title>HTB: Sauna Writeup | Elixir1013
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Elixir1013">
<meta name="application-name" content="Elixir1013">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  <!-- Resource Hints -->
     <link
  rel="preconnect" href="https://fonts.googleapis.com" >  <link
  rel="dns-prefetch" href="https://fonts.googleapis.com" >    <link
  rel="preconnect" href="https://fonts.gstatic.com" crossorigin>  <link
  rel="dns-prefetch" href="https://fonts.gstatic.com" >    <link
  rel="preconnect" href="https://cdn.jsdelivr.net" >  <link
  rel="dns-prefetch" href="https://cdn.jsdelivr.net" >   

  <!-- Bootstrap -->
  
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
  />
  

  <!-- Theme style -->
  <link
    rel="stylesheet"
    href="/assets/css/jekyll-theme-chirpy.css"
  />

  <!-- Stars -->
  <link rel="stylesheet" href="/assets/css/stars.css" />

  <!-- Web Font -->
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"
  />

  <!-- Font Awesome Icons -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.6.0/css/all.min.css"
  />

  <!-- 3rd-party Dependencies -->

  
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/tocbot@4.29.0/dist/tocbot.min.css"
  />
   
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"
  />
   
  <!-- Image Popup -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"
  />
  

  <!-- JavaScript -->

   <!-- A placeholder to allow defining custom metadata -->

</head>

  <div class="stars"></div>

  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="/assets/img/avatar.jpeg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <h1 class="site-title">
      <a href="/">Elixir1013</a>
    </h1>
    <p class="site-subtitle fst-italic mb-0">This is a personal cybersecurity blog that breaks down challenges across various categories. Here you will find detailed writeups, solutions to challenges from multiple platforms, and general resources on cybersecurity</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT ME</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    

    
      

      
        <a
          href="https://github.com/Eliud1013"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['eliud101xz','gmail.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="https://www.linkedin.com/in/eliud-gaxiola-6678b7215/"
          aria-label="linkedin"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-linkedin"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">Home</a>
            </span>

          
        
          
        
          
            
              <span>HTB: Sauna Writeup</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main
            aria-label="Main Content"
            class="col-12 col-lg-11 col-xl-9 px-md-4"
          >
             <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->




  
  

  
    
      
      
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  

  


<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  

  
  

  




<!-- return -->




<article class="px-1">
  <header>
    <h1 data-toc-skip>HTB: Sauna Writeup</h1>
    
    <p class="post-desc fw-light mb-4">In this post, we're resolving Sauna Machine from HackTheBox, where we'll deal with an Active Directory environment. We will exploit AS-REP Roasting on a domain account, reading autologon credentials and doing some domain ACEs analysis using BloodHound, finally we will perfom a DCSync attack to escalate our privileges.</p>
    

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1725883200"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Sep  9, 2024
</time>

      </span>

      <!-- lastmod date -->
      
      <span>
        Updated <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1726012280"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Sep 10, 2024
</time>

      </span>
           

      <div class="mt-3 mb-3">
        <a href="https://www.hackthebox.com/storage/avatars/f31d5d0264fadc267e7f38a9d7729d14.png" class="popup img-link preview-img-post shimmer"><img src="https://www.hackthebox.com/storage/avatars/f31d5d0264fadc267e7f38a9d7729d14.png"  alt="Machine Icon" width="1200" height="630"  loading="lazy"></a><figcaption class="text-center pt-2 pb-2">
          Machine Icon
        </figcaption></div>
      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="1638 words"
>
  <em>9 min</em> read</span>

        </div>
      </div>
    </div>
  </header>

  <div class="content"><h2 id="machine-information"><span class="me-2">Machine Information</span><a href="#machine-information" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<blockquote>
  <h3 id="synopsis"><span class="me-2"><strong>Synopsis</strong></span><a href="#synopsis" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
</blockquote>

<p>Sauna is an easy difficulty Windows machine that features Active Directory enumeration and exploitation. Possible usernames can be derived from employee full names listed on the website. With these usernames, an ASREPRoasting attack can be performed, which results in hash for an account that doesn’t require Kerberos pre-authentication. This hash can be subjected to an offline brute force attack, in order to recover the plaintext password for a user that is able to WinRM to the box. Running WinPEAS reveals that another system user has been configured to automatically login and it identifies their password. This second user also has Windows remote management permissions. BloodHound reveals that this user has the <em>DS-Replication-Get-Changes-All</em> extended right, which allows them to dump password hashes from the Domain Controller in a DCSync attack. Executing this attack returns the hash of the primary domain administrator, which can be used with Impacket’s psexec.py in order to gain a shell on the box as <code class="language-plaintext highlighter-rouge">NT_AUTHORITY\\SYSTEM</code>.</p>

<blockquote>
  <h3 id="general-information"><span class="me-2"><strong>General Information</strong></span><a href="#general-information" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
</blockquote>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th style="text-align: left">Machine</th>
      <th>Nest</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">OS</td>
      <td>Windows</td>
    </tr>
    <tr>
      <td style="text-align: left">Dificulty</td>
      <td>Easy</td>
    </tr>
    <tr>
      <td style="text-align: left">Stars</td>
      <td>4.5</td>
    </tr>
    <tr>
      <td style="text-align: left">Release Date</td>
      <td>15 Feb 2020</td>
    </tr>
  </tbody>
</table></div>

<hr />

<h2 id="recon"><span class="me-2"><strong>Recon</strong></span><a href="#recon" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Let’s start by enumerating active services in the machine, we can use nmap in order to do this, besides of running nmap scripts, and enumerating versions.</p>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre></td><td class="rouge-code"><pre>❯ <span class="nb">sudo </span>nmap <span class="nt">-p-</span> <span class="nt">-sSVC</span> <span class="nt">--min-rate</span> 7000 <span class="nt">--min-parallelism</span> 100 <span class="nt">-oN</span> machine_services.txt <span class="nt">-n</span> 10.10.10.175
Stats: 0:01:56 elapsed<span class="p">;</span> 0 hosts completed <span class="o">(</span>1 up<span class="o">)</span>, 1 undergoing Script Scan
NSE Timing: About 99.96% <span class="k">done</span><span class="p">;</span> ETC: 14:27 <span class="o">(</span>0:00:00 remaining<span class="o">)</span>
Nmap scan report <span class="k">for </span>10.10.10.175
Host is up <span class="o">(</span>0.28s latency<span class="o">)</span><span class="nb">.</span>
Not shown: 65515 filtered tcp ports <span class="o">(</span>no-response<span class="o">)</span>
PORT      STATE SERVICE       VERSION
53/tcp    open  domain        Simple DNS Plus
80/tcp    open  http          Microsoft IIS httpd 10.0
|_http-server-header: Microsoft-IIS/10.0
|_http-title: Egotistical Bank :: Home
| http-methods:
|_  Potentially risky methods: TRACE
88/tcp    open  kerberos-sec  Microsoft Windows Kerberos <span class="o">(</span>server <span class="nb">time</span>: 2024-09-08 04:26:02Z<span class="o">)</span>
135/tcp   open  msrpc         Microsoft Windows RPC
139/tcp   open  netbios-ssn   Microsoft Windows netbios-ssn
389/tcp   open  ldap          Microsoft Windows Active Directory LDAP <span class="o">(</span>Domain: EGOTISTICAL-BANK.LOCAL0., Site: Default-First-Site-Name<span class="o">)</span>
445/tcp   open  microsoft-ds?
464/tcp   open  kpasswd5?
593/tcp   open  ncacn_http    Microsoft Windows RPC over HTTP 1.0
636/tcp   open  tcpwrapped
3268/tcp  open  ldap          Microsoft Windows Active Directory LDAP <span class="o">(</span>Domain: EGOTISTICAL-BANK.LOCAL0., Site: Default-First-Site-Name<span class="o">)</span>
3269/tcp  open  tcpwrapped
5985/tcp  open  http          Microsoft HTTPAPI httpd 2.0 <span class="o">(</span>SSDP/UPnP<span class="o">)</span>
|_http-title: Not Found
|_http-server-header: Microsoft-HTTPAPI/2.0
9389/tcp  open  mc-nmf        .NET Message Framing
49667/tcp open  msrpc         Microsoft Windows RPC
49673/tcp open  msrpc         Microsoft Windows RPC
49674/tcp open  ncacn_http    Microsoft Windows RPC over HTTP 1.0
49676/tcp open  msrpc         Microsoft Windows RPC
49689/tcp open  msrpc         Microsoft Windows RPC
49697/tcp open  msrpc         Microsoft Windows RPC
Service Info: Host: SAUNA<span class="p">;</span> OS: Windows<span class="p">;</span> CPE: cpe:/o:microsoft:windows

Host script results:
| smb2-time:
|   <span class="nb">date</span>: 2024-09-08T04:26:55
|_  start_date: N/A
| smb2-security-mode:
|   3:1:1:
|_    Message signing enabled and required
|_clock-skew: 6h59m39s

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ <span class="nb">.</span>
Nmap <span class="k">done</span>: 1 IP address <span class="o">(</span>1 host up<span class="o">)</span> scanned <span class="k">in </span>134.97 seconds
</pre></td></tr></tbody></table></code></div></div>

<p>We can see some interesting services running on the machine. Since it is running DNS, Kerberos, LDAP, etc; we can assume that we’re dealing with a domain controller. We can also see that the server is hosting a web server, so we definitely we must take a look at it.</p>

<p>First, let’s obtain the domain name in order to add it to our hosts file. We can use <code class="language-plaintext highlighter-rouge">crackmapexec</code> for this.</p>

<div class="language-sh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>❯ crackmapexec smb 10.10.10.175
SMB         10.10.10.175    445    SAUNA            <span class="o">[</span><span class="k">*</span><span class="o">]</span> Windows 10 / Server 2019 Build 17763 x64 <span class="o">(</span>name:SAUNA<span class="o">)</span> <span class="o">(</span>domain:EGOTISTICAL-BANK.LOCAL<span class="o">)</span> <span class="o">(</span>signing:True<span class="o">)</span> <span class="o">(</span>SMBv1:False<span class="o">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Now <code class="language-plaintext highlighter-rouge">egotistical-bank.local</code> will be resolved
<a href="/assets/img/HackTheBox/Sauna/img_2.png" class="popup img-link  shimmer"><img src="/assets/img/HackTheBox/Sauna/img_2.png" alt="img_2" loading="lazy"></a></p>

<p>We can attempt to get null or anonymous sessions on SMB or LDAP, but note that this is likely to fail. So let’s take a look at the website…</p>

<h3 id="analyzing-the-website"><span class="me-2"><strong>Analyzing the Website</strong></span><a href="#analyzing-the-website" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>It appears to be a bank’s website, but I didn’t find anything interesting. There are some contact forms, but they don’t work, we’ll receive a <code class="language-plaintext highlighter-rouge">Method not allowed</code> HTTP response. I prefer to not to put effort into trying to making them work.
<a href="/assets/img/HackTheBox/Sauna/img_3.png" class="popup img-link  shimmer"><img src="/assets/img/HackTheBox/Sauna/img_3.png" alt="img_3" loading="lazy"></a></p>

<p>If we scroll down in the <code class="language-plaintext highlighter-rouge">about.html</code> page, we will find the following:
<a href="/assets/img/HackTheBox/Sauna/img_4.png" class="popup img-link  shimmer"><img src="/assets/img/HackTheBox/Sauna/img_4.png" alt="img_4" loading="lazy"></a>
We see that there are some employee names. We can use these names to create a username wordlist to try to find valid usernames in the domain.
Who knows?, they might have domain accounts, let’s figure out.</p>

<p>To achieve this, I’ve created a basic Node.js tool that will do exactly what we need, you can download it from it’s GitHub repository:
<a href="https://github.com/Eliud1013/AD-Username-Generator">AD-Username-Generator</a></p>

<h3 id="generating-a-username-wordlist"><span class="me-2"><strong>Generating a username wordlist</strong></span><a href="#generating-a-username-wordlist" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>We can use <code class="language-plaintext highlighter-rouge">curl</code> and <code class="language-plaintext highlighter-rouge">grep</code> using LookAround expressions to easily extract the employes names the from the about webpage.
Alternatively, we could simply copy the names and paste them into a file manually. I preffer to complicate things to myself.
<a href="/assets/img/HackTheBox/Sauna/img_5.png" class="popup img-link  shimmer"><img src="/assets/img/HackTheBox/Sauna/img_5.png" alt="img_5" loading="lazy"></a></p>

<p>Well, once we have the employee names in a file, we can run the script to generate possible Active Directory usernames.
<a href="/assets/img/HackTheBox/Sauna/img_6.png" class="popup img-link  shimmer"><img src="/assets/img/HackTheBox/Sauna/img_6.png" alt="img_6" loading="lazy"></a>
There is also a great tool for generating this type of wordlist. You can download it from its GitHub repository if you prefer using Python: <a href="https://github.com/captain-noob/username-wordlist-generator">username-list-generator
</a></p>

<p>Nice, now that we’ve got a username wordlist, we can use <code class="language-plaintext highlighter-rouge">Kerbrute</code> to enumerate valid users through Kerberos. Kerbrute will request a TGT for every user in the wordlist without providing a password. If the user exists, the KDC will notify us that the user does not have the <code class="language-plaintext highlighter-rouge">DONT_REQ_PREAUTH</code> flag set. If the user does not exists, the KDC will return an <code class="language-plaintext highlighter-rouge">ERR_C_PRINCIPAL_UNKNOWN</code> error. This way, <code class="language-plaintext highlighter-rouge">Kerbrute</code> can determine wheter a user exists or not.
Obviusly, if the user has the <code class="language-plaintext highlighter-rouge">DONT_REQ_PREAUTH</code> flag set, <code class="language-plaintext highlighter-rouge">Kerbrute</code> will mark the user as valid.
<a href="/assets/img/HackTheBox/Sauna/img_7.png" class="popup img-link  shimmer"><img src="/assets/img/HackTheBox/Sauna/img_7.png" alt="img_7" loading="lazy"></a>
Cool, we’ve enumerated one valid user, that might be enough. Let’s find out.</p>

<h3 id="as-rep-roasting"><span class="me-2">AS-REP Roasting</span><a href="#as-rep-roasting" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Now that we’ve found a valid user, we can use <code class="language-plaintext highlighter-rouge">impacket-NPUsers</code> to check whether <code class="language-plaintext highlighter-rouge">FSmith</code> requires pre-authentication or not.</p>

<p><a href="/assets/img/HackTheBox/Sauna/img_9.png" class="popup img-link  shimmer"><img src="/assets/img/HackTheBox/Sauna/img_9.png" alt="img_9" loading="lazy"></a></p>

<p>Great, <code class="language-plaintext highlighter-rouge">FSmith</code> does not require pre-authentication to request a TGT from the KDC. This means we can send a <code class="language-plaintext highlighter-rouge">KRB_AS_REQ</code> message without providing the user password which will let us receive a <code class="language-plaintext highlighter-rouge">KRB_AS_REP</code> message, which contains the <code class="language-plaintext highlighter-rouge">TGT</code>, and the following items encrypted with a secret key derived from the user’s password:</p>

<ul>
  <li>Session Key</li>
  <li>TGT Expiration Time</li>
  <li>User Nonce</li>
</ul>

<p>So, when we attempt to take advantage of a user who has the <code class="language-plaintext highlighter-rouge">DONT_REQ_PREAUTH</code> flag set, we’re going to focus on bruteforce the mentioned package, not directly the TGT as the TGT is encrypted using a secret key derived from the user <code class="language-plaintext highlighter-rouge">krbtgt</code> password, which is a very large password. Although we don’t need to worry about this, as Hashcat will do all the stuff for us but is good to know this kind of things. Anyway we can refer to this process as <code class="language-plaintext highlighter-rouge">TGT Cracking</code>.
Here we can take a look in the <code class="language-plaintext highlighter-rouge">KRB_AS_REP</code> package from Wireshark:
<a href="/assets/img/HackTheBox/Sauna/img_8.png" class="popup img-link  shimmer"><img src="/assets/img/HackTheBox/Sauna/img_8.png" alt="img_8" loading="lazy"></a></p>

<p>We can see that there are two encrypted parts (enc-part): one is in the <code class="language-plaintext highlighter-rouge">ticket</code> part, which is the TGT , and the another at the same ticket level; is the data that the user can decrypt with his password.</p>

<p>Now if we see again the encrypted data that we obtain using <code class="language-plaintext highlighter-rouge">impacket-NPUsers</code>, we’ll notice that is exactly the same value that we obtain from Wireshark in the user encrypted part (59b7fd23ed…..) but with some additional information that will help cracking tools to recognize the format (<code class="language-plaintext highlighter-rouge">$krb5asrep$23$fsmith@EGOTISTICAL-BANK.LOCAL:</code>).</p>

<hr />

<h2 id="foothold"><span class="me-2"><strong>Foothold</strong></span><a href="#foothold" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="cracking-the-ticket"><span class="me-2"><strong>Cracking the Ticket</strong></span><a href="#cracking-the-ticket" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>To crack the TGT we can use several tools, I prefer to use <code class="language-plaintext highlighter-rouge">Hashcat</code>, but <code class="language-plaintext highlighter-rouge">John</code> is a great option too.
Hashcat need us to provide a <code class="language-plaintext highlighter-rouge">hash mode</code> with <code class="language-plaintext highlighter-rouge">-m</code> parameter. We can find the mode for <code class="language-plaintext highlighter-rouge">AS-REP</code> with the following command:
<a href="/assets/img/HackTheBox/Sauna/img_10.png" class="popup img-link  shimmer"><img src="/assets/img/HackTheBox/Sauna/img_10.png" alt="img_10" loading="lazy"></a></p>

<p>Nice, the appropiate mode is <code class="language-plaintext highlighter-rouge">18200</code>, now let’s see if we can get the password.</p>

<blockquote>
  <p>Used command:</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>❯ hashcat <span class="nt">-m</span> 18200 <span class="nt">-a</span> 0 ./fsmith.kirbi  /usr/share/wordlists/rockyou.txt
</pre></td></tr></tbody></table></code></div></div>

<blockquote>
  <p>Output:</p>
</blockquote>

<p><a href="/assets/img/HackTheBox/Sauna/img_11.png" class="popup img-link  shimmer"><img src="/assets/img/HackTheBox/Sauna/img_11.png" alt="img_11" loading="lazy"></a>
And we’ve got the password for the <code class="language-plaintext highlighter-rouge">FSmith</code> user:
<strong>Thestrokes23</strong></p>

<h3 id="logging-in-as-user-fsmith"><span class="me-2"><strong>Logging in as user FSmith</strong></span><a href="#logging-in-as-user-fsmith" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Now we can use <code class="language-plaintext highlighter-rouge">PywerView</code> to see which domain groups <code class="language-plaintext highlighter-rouge">FSmith</code> belongs to.
<a href="/assets/img/HackTheBox/Sauna/img_12.png" class="popup img-link  shimmer"><img src="/assets/img/HackTheBox/Sauna/img_12.png" alt="img_12" loading="lazy"></a></p>

<p>Remote Management Users… Nice, in that case let’s get shell using <code class="language-plaintext highlighter-rouge">evil-winrm</code> and read the user flag.
<a href="/assets/img/HackTheBox/Sauna/img_13.png" class="popup img-link  shimmer"><img src="/assets/img/HackTheBox/Sauna/img_13.png" alt="img_13" loading="lazy"></a></p>

<hr />

<h2 id="privilege-escalation"><span class="me-2"><strong>Privilege Escalation</strong></span><a href="#privilege-escalation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="system-enumeration"><span class="me-2"><strong>System Enumeration</strong></span><a href="#system-enumeration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Now that we’ve obtained a shell, we will proceed to enumerate the system. To do this, I’m going to use <code class="language-plaintext highlighter-rouge">WinPeas.exe</code>. Let’s see what we can find.
<a href="/assets/img/HackTheBox/Sauna/img_14.png" class="popup img-link  shimmer"><img src="/assets/img/HackTheBox/Sauna/img_14.png" alt="img_14" loading="lazy"></a></p>

<p>If we search for the <code class="language-plaintext highlighter-rouge">password</code> keyword, we’ll find plain text autologon credentials for the user <code class="language-plaintext highlighter-rouge">svc_loanmanager</code>. I really got stuck with these credentials, because the user is actually <code class="language-plaintext highlighter-rouge">svc_loanmgr</code> and not <code class="language-plaintext highlighter-rouge">svc_loanmanager</code> , I guess the registry hive for autologons is outdated. Anyway, if we list user directories in <code class="language-plaintext highlighter-rouge">C:\Users\</code>, we’ll find the real username.</p>

<p><a href="/assets/img/HackTheBox/Sauna/img_15.png" class="popup img-link  shimmer"><img src="/assets/img/HackTheBox/Sauna/img_15.png" alt="img_15" loading="lazy"></a></p>

<p>Well, now let’s use <code class="language-plaintext highlighter-rouge">evil-winrm</code> again with these new credentials and continue enumerating with this new user.
Since we have a service account we should consider using <code class="language-plaintext highlighter-rouge">Bloodhound</code> to easily look at that privileges do we have in the domain.</p>

<p>I’m gonna use <code class="language-plaintext highlighter-rouge">SharpHound</code> to collect the domain data, you can download it from its GitHub repository:
<a href="https://github.com/BloodHoundAD/SharpHound">SharpHound</a>.</p>

<h3 id="dcsync"><span class="me-2"><strong>DCSync</strong></span><a href="#dcsync" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>If we filter by Principals with DCSync rights, we’ll see the following:
<a href="/assets/img/HackTheBox/Sauna/img_16.png" class="popup img-link  shimmer"><img src="/assets/img/HackTheBox/Sauna/img_16.png" alt="img_16" loading="lazy"></a>
The user <code class="language-plaintext highlighter-rouge">svc_loanmgr</code> has <code class="language-plaintext highlighter-rouge">DCSync</code> rights; kinda strange permissions for a service account meant to manage loans.</p>

<p>To exploit a domain using <code class="language-plaintext highlighter-rouge">DCSync</code> rights, we essentially tell the Domain Controller that we are another Domain Controller and we want to synchronize the domain database. So we request the whole database which includes absolutely all the domain information, including NTLM hashes of every account in the domain. This database is named <code class="language-plaintext highlighter-rouge">NTDS</code> and is present in every domain controller.</p>

<p>So now let’s use <code class="language-plaintext highlighter-rouge">impacket-secretsdump</code> to dump the NTDS.
<a href="/assets/img/HackTheBox/Sauna/img_17.png" class="popup img-link  shimmer"><img src="/assets/img/HackTheBox/Sauna/img_17.png" alt="img_17" loading="lazy"></a></p>

<h3 id="pth-as-administrator"><span class="me-2"><strong>PtH as Administrator</strong></span><a href="#pth-as-administrator" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Now we can use the Administrator NTLM Hash to perform a Pass-the-Hash attack. There are a lot of tools that support authentication using NTLM hashes, I’ll use <code class="language-plaintext highlighter-rouge">evil-winrm</code>.
<a href="/assets/img/HackTheBox/Sauna/img_18.png" class="popup img-link  shimmer"><img src="/assets/img/HackTheBox/Sauna/img_18.png" alt="img_18" loading="lazy"></a></p>

<p>This was a very easy machine, and it was enjoyable to work on, especially if you’re unfamiliar with AS-REP Roasting and DCSync.</p>
</div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
    <div class="post-meta mb-3">
      <i class="far fa-folder-open fa-fw me-1"></i>
      
      <a
        href="/categories/hackthebox/"
        >HackTheBox</a
      >,
      <a
        href="/categories/ctf/"
        >CTF</a
      >
    </div>
    

    <!-- tags -->
    
    <div class="post-tags">
      <i class="fa fa-tags fa-fw me-1"></i>
      
      <a
        href="/tags/vulnerability-assessment/"
        class="post-tag no-text-decoration"
      >Vulnerability Assessment</a>
      
      <a
        href="/tags/active-directory/"
        class="post-tag no-text-decoration"
      >Active Directory</a>
      
      <a
        href="/tags/security-tools/"
        class="post-tag no-text-decoration"
      >Security Tools</a>
      
      <a
        href="/tags/authentication/"
        class="post-tag no-text-decoration"
      >Authentication</a>
      
      <a
        href="/tags/reconnaissance/"
        class="post-tag no-text-decoration"
      >Reconnaissance</a>
      
      <a
        href="/tags/user-enumeration/"
        class="post-tag no-text-decoration"
      >User Enumeration</a>
      
      <a
        href="/tags/password-cracking/"
        class="post-tag no-text-decoration"
      >Password Cracking</a>
      
      <a
        href="/tags/asreproasting/"
        class="post-tag no-text-decoration"
      >ASREPRoasting</a>
      
      <a
        href="/tags/ad-dcsync/"
        class="post-tag no-text-decoration"
      >AD DCSync</a>
      
      <a
        href="/tags/pass-the-hash/"
        class="post-tag no-text-decoration"
      >Pass the Hash</a>
      
      <a
        href="/tags/misconfiguration/"
        class="post-tag no-text-decoration"
      >Misconfiguration</a>
      
      <a
        href="/tags/autologon-credentials/"
        class="post-tag no-text-decoration"
      >Autologon Credentials</a>
      
      <a
        href="/tags/enterprise-network/"
        class="post-tag no-text-decoration"
      >Enterprise Network</a>
      
    </div>
    

    <div
      class="post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2"
    >
      <div class="license-wrapper">
          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author. 
      </div>
    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>

 
          </main>

          <!-- panel -->
          <aside
            aria-label="Panel"
            id="panel-wrapper"
            class="col-xl-3 ps-2 mb-5 text-muted"
          >
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">Recently Updated</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/Escape/">HTB: Escape Writeup</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/CheatSheet-net-Command/">Cheat Sheet: net Command</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/Builder/">HTB: Builder Writeup</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/Sauna/">HTB: Sauna Writeup</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/Nest/">HTB: Nest Writeup</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->

 <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">You might be interested in</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/reconnaissance/">Reconnaissance</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/vulnerability-assessment/">Vulnerability Assessment</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/authentication/">Authentication</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/misconfiguration/">Misconfiguration</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/password-cracking/">Password Cracking</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/user-enumeration/">User Enumeration</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/active-directory/">Active Directory</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/anonymous-guest-access/">Anonymous/Guest Access</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/enterprise-network/">Enterprise Network</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/pass-the-hash/">Pass the Hash</a>
      
    </div>
  </section>


            </div>

              



  <section id="toc-wrapper" class="d-none ps-0 pe-4">
    <h2 class="panel-heading ps-3 mb-2">Contents</h2>
    <nav id="toc"></nav>
  </section>

 
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->















  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
  

  

  

  

  

  

  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">Further Reading</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/Escape/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1728129600"
  data-df="ll"
  
>
  Oct  5, 2024
</time>

              <h4 class="pt-0 my-2">HTB: Escape Writeup</h4>
              <div class="text-muted">
                <p>Scape is a Medium Windows AD machine. It starts with an SMB share exposing a PDF containing MSSQL credentials. The attacker forces MSSQL to authenticate and captures a crackable hash. With these cr...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/Builder/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1726488000"
  data-df="ll"
  
>
  Sep 16, 2024
</time>

              <h4 class="pt-0 my-2">HTB: Builder Writeup</h4>
              <div class="text-muted">
                <p>Builder is a Medium HTB machine where we exploit Jenkins CVE-2024-23897, which allows us to read files on the server. We can retrieve user credentials by enumerating Jenkins configuration files, cr...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/Nest/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1725364800"
  data-df="ll"
  
>
  Sep  3, 2024
</time>

              <h4 class="pt-0 my-2">HTB: Nest Writeup</h4>
              <div class="text-muted">
                <p>In this post we&#39;re resolving Nest machine from HackTheBox, this is cataloged as an easy Windows box where SMB guest access leads to low-privileged credentials. Dive into configuration files for sen...</p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->

   <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/InsecureDeserialization/"
      class="btn btn-outline-primary"
      aria-label="Older"
    >
      <p>Insecure Deserialization: Node.js</p>
    </a>
  

  
    <a
      href="/posts/Builder/"
      class="btn btn-outline-primary"
      aria-label="Newer"
    >
      <p>HTB: Builder Writeup</p>
    </a>
  
</nav>
   <!-- The comments switcher -->

  <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3"
>
  <p>©
    <time>2024</time>

    
    <a href="https://www.linkedin.com/in/eliud-gaxiola-6678b7215/">Eliud</a>.  
  </p>

  <p>Using the <a
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="v7.1.0"
      href="https://github.com/cotes2020/jekyll-theme-chirpy"
      target="_blank"
      rel="noopener"
      >Chirpy</a
    > theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">You might be interested in</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/reconnaissance/">Reconnaissance</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/vulnerability-assessment/">Vulnerability Assessment</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/authentication/">Authentication</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/misconfiguration/">Misconfiguration</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/password-cracking/">Password Cracking</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/user-enumeration/">User Enumeration</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/active-directory/">Active Directory</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/anonymous-guest-access/">Anonymous/Guest Access</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/enterprise-network/">Enterprise Network</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/pass-the-hash/">Pass the Hash</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button
          id="back-to-top"
          type="button"
          class="btn btn-lg btn-box-shadow"
        >
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask"></div>

     <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- JavaScripts -->
    <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


 
<!-- image lazy-loading & popup & clipboard -->
      






  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.29.0/dist/tocbot.min.js"></script>

  

<script src="/assets/js/dist/post.min.js"></script>



<!-- Pageviews -->
 
   
 <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('search-results'),
    json: '/assets/js/data/search.json',
    searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
    noResultsText: '<p class="mt-5">Oops! No results found.</p>',
    templateMiddleware: function(prop, value, template) {
      if (prop === 'categories') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
        }
      }

      if (prop === 'tags') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
        }
      }
    }
  });
</script>

  </body>
  <script>
    const numStars = 100;
    const starField = document.createElement("div");
    starField.className = "stars";
    document.body.appendChild(starField);

    for (let i = 0; i < numStars; i++) {
      const star = document.createElement("div");
      star.className = "star";

      const size = Math.random() * 2 + 1;
      star.style.width = `${size}px`;
      star.style.height = `${size}px`;

      star.style.top = `${Math.random() * 100}vh`;
      star.style.left = `${Math.random() * 100}vw`;

      const duration = Math.random() * 5 + 7;
      star.style.animationDuration = `${duration}s`;

      const delay = Math.random() * 5;
      star.style.animationDelay = `${delay}s`;

      starField.appendChild(star);
    }
  </script>
</html>

